<app-loader *ngIf="!response"></app-loader>
<main *ngIf="response" class="w-full h-full">
    <app-header-component class="fixed top-0 z-50  w-full"></app-header-component>
    <div class="fixed bottom-0 left-0 right-0 z-40 px-4 py-3 text-center text-white bg-gray-800">
        This is a Profile Page by Creative Tim.
    </div>
    <link rel="stylesheet" href="https://demos.creative-tim.com/notus-js/assets/styles/tailwind.css">
    <link rel="stylesheet"
        href="https://demos.creative-tim.com/notus-js/assets/vendor/@fortawesome/fontawesome-free/css/all.min.css">

    <main class="profile-page">
        <section class="relative block h-500-px">
            <div class="absolute top-0 w-full h-full bg-center bg-cover" style="
        background-image: url('https://images.unsplash.com/photo-1499336315816-097655dcfbda?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=2710&amp;q=80');
      ">
                <span id="blackOverlay" class="w-full h-full absolute opacity-50 bg-black"></span>
            </div>
            <div class="top-auto bottom-0 left-0 right-0 w-full absolute pointer-events-none overflow-hidden h-70-px"
                style="transform: translateZ(0px)">
                <svg class="absolute bottom-0 overflow-hidden" xmlns="http://www.w3.org/2000/svg"
                    preserveAspectRatio="none" version="1.1" viewBox="0 0 2560 100" x="0" y="0">
                    <polygon class="text-blueGray-200 fill-current" points="2560 0 2560 100 0 100"></polygon>
                </svg>
            </div>
        </section>
        <section class="relative py-16 bg-blueGray-200">
            <div class="container mx-auto px-4">
                <div
                    class="relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-xl rounded-lg -mt-64">
                    <div class="px-6">
                        <div class="flex flex-wrap justify-center">
                            <div class="w-full lg:w-3/12 px-4 lg:order-2 flex justify-center -mr-12">
                                <div class="relative">
                                    <img alt="..." src="{{profilesource}}"
                                        class="shadow-xl rounded-full align-middle border-none absolute object-cover -m-16 -ml-20 lg:-ml-16 max-w-150-px"
                                        style="border-radius: 50%; width: 150px; height: 150px;">
                                </div>
                                <label for="fileInput"
                                    class="text-lg z-10 -ml-7 flex items-center cursor-pointer text-gray-900  font-bold pt-20">
                                    <span>Upload</span>
                                    <span nz-icon nzType="edit" nzTheme="outline"></span>
                                    <input accept="image/*" id="fileInput"
                                        class="bg-black w-7 h-7 hidden rounded-full overflow-hidden" type="file"
                                        (change)="handleImageUpload($event)">
                                </label>
                            </div>
                            <div class="w-full lg:w-4/12 px-4 lg:order-3 lg:text-right lg:self-center">
                                <div class="py-6 px-3 mt-32 sm:mt-0">
                                    <button (click)="namechange()"
                                        class="bg-pink-500 active:bg-pink-600 uppercase text-white font-bold hover:shadow-md shadow text-xs px-4 py-2 rounded outline-none focus:outline-none sm:mr-2 mb-1 ease-linear transition-all duration-150"
                                        type="button">
                                        Change Name
                                    </button>
                                </div>
                            </div>
                            <div class="w-full lg:w-4/12 px-4 lg:order-1">
                                <div class="flex justify-center py-4 lg:pt-4 pt-8">
                                    <div class="mr-4 p-3 text-center">
                                        <span
                                            class="text-xl font-bold block uppercase tracking-wide text-blueGray-600">{{totalorder}}</span><span
                                            class="text-sm text-blueGray-400">ToTal Orders</span>
                                    </div>
                                    <div class="mr-4 p-3 text-center">
                                        <span
                                            class="text-xl font-bold block uppercase tracking-wide text-blueGray-600">{{pendingorder}}</span><span
                                            class="text-sm text-blueGray-400">Pending Orders</span>
                                    </div>
                                    <div class="lg:mr-4 p-3 text-center">
                                        <span
                                            class="text-xl font-bold block uppercase tracking-wide text-blueGray-600">{{completedorder}}</span><span
                                            class="text-sm text-blueGray-400">Completed Orders</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="text-center mt-12">
                            <h3 class="text-4xl font-semibold uppercase leading-normal text-blueGray-700 mb-2">
                                {{username}}
                            </h3>
                            <div class="text-sm leading-normal mt-0 mb-2 text-blueGray-400 font-mono uppercase">
                                <i class="fas fa-map-marker-alt mr-2 text-lg text-blueGray-400"></i>
                                {{fulllocation}}
                            </div>
                            <div class="mb-2 text-blueGray-600 mt-10">
                                <i class="fas fa-briefcase mr-2 text-lg text-blueGray-400"></i>{{shopnameuser}}
                            </div>
                            <div class="mb-2 text-blueGray-600">
                                <i class="fas fa-university mr-2 text-lg text-blueGray-400"></i>Online Shoping in World
                            </div>
                            <div class="flex items-center justify-center space-x-2 font-bold text-blue-900">
                                <span (click)="security()" class="cursor-pointer" nz-icon nzType="setting"
                                    nzTheme="outline"></span>
                                <button (click)="security()" class="text-blue-900 ">Setting</button>
                            </div>

                        </div>
                        <div class="mt-10 py-10 border-t border-blueGray-200 text-center">
                            <div class="flex flex-wrap justify-center">
                                <div *ngFor="let paragraph of paragraphs" class="w-full lg:w-9/12 px-4">
                                    <p [innerHTML]="paragraph.text" *ngIf="paragraph.show"
                                        class="mb-4 text-lg leading-relaxed text-blueGray-700">

                                    </p>


                                </div>
                                <div *ngIf="showMoreLimit < paragraphs.length" class="w-full flex justify-center"><a
                                        (click)="showMore()" class="font-normal text-pink-500">Show more</a></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="relative bg-blueGray-200 pt-8 pb-6 mt-8">
                <div class="container mx-auto px-4">
                    <div class="flex flex-wrap items-center md:justify-between justify-center">
                        <div class="w-full md:w-6/12 px-4 mx-auto text-center">
                            <div class="text-sm text-blueGray-500 font-semibold py-1">
                                Made with <a>Notus JS</a> by <a
                                    class="text-blueGray-500 hover:text-blueGray-800 uppercase">
                                    {{adminname}}</a>.
                            </div>
                        </div>
                    </div>
                </div>
            </footer>
        </section>
    </main>
    <nz-drawer [nzClosable]="true" [nzSize]="size" [nzVisible]="visibledrawer" [nzPlacement]="placement"
        nzTitle="Security Option" (nzOnClose)="closedrawer()">
        <ng-container *nzDrawerContent>
            <section>
                <nz-collapse id="changeshop" [nzExpandIconPosition]="'right'">
                    <nz-collapse-panel *ngFor="let panel of panels" [nzHeader]="panel.name" [nzActive]="panel.active"
                        [nzDisabled]="panel.disabled">
                        <section *ngIf="!isuseractasadmin" class="w-full">
                            <div class="w-full">
                                <span class="text-gray-500">Shop Name</span>
                                <nz-form-item>
                                    <nz-form-control nzErrorTip="Please input your shop name">
                                        <nz-select class="!w-full" nzShowSearch nzAllowClear
                                            nzPlaceHolder="Select a person" name="select" [(ngModel)]="Usershopname">
                                            <div *ngFor="let item of fulladmindata">
                                                <nz-option nzLabel="{{item.shopname}}"
                                                    nzValue="{{item.accountid}}"></nz-option>
                                            </div>
                                        </nz-select>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div class="flex justify-center">
                                <button (click)="updateshopname()"
                                    class="bg-blue-950 rounded-full px-3 py-1 text-white">Update</button>
                            </div>
                        </section>
                        <section *ngIf="isuseractasadmin" class="w-full space-y-3">
                            <div class="w-full space-y-1">
                                <span class="text-gray-500">Shop Name</span>
                                <input nz-input [(ngModel)]="adminshop" type="text" nzSize="small">
                            </div>
                            <div class="flex justify-center">
                                <button (click)="adminshopupdate()"
                                    class="bg-blue-950 rounded-full px-3 py-1 text-white">Update</button>
                            </div>
                        </section>
                    </nz-collapse-panel>
                </nz-collapse>
                <nz-collapse id="changeshop" [nzExpandIconPosition]="'right'">
                    <nz-collapse-panel *ngFor="let panel of panels2" [nzHeader]="panel.name" [nzActive]="panel.active"
                        [nzDisabled]="panel.disabled">
                        <section class="">
                            <nz-steps [nzCurrent]="current2">
                                <nz-step nzTitle="1"></nz-step>
                                <nz-step nzTitle="2"></nz-step>
                                <nz-step nzTitle="3"></nz-step>
                            </nz-steps>
            
                            <div *ngIf="index2===1" class="steps-content">
                                <div class="w-full space-y-2">
                                    <span class="text-gray-500">Enter Your Favorite Fruit</span>
                                    <input nz-input [(ngModel)]="forgotpassword.Fruit"
                                        type="text" nzSize="small">
                                </div>
                            </div>
                            <div *ngIf="index2===2" class="steps-content">
                                <div class="w-full space-y-2">
                                    <span class="text-gray-500">Enter Your Favorite Vegetable</span>
                                    <input nz-input [(ngModel)]="forgotpassword.Vegetable" 
                                        type="text" nzSize="small">
                                </div>
                            </div>
                            <div *ngIf="index2===3" class="steps-content">
                                <div class="w-full space-y-2">
                                    <span class="text-gray-500">Enter Your Favorite Colour</span>
                                    <input nz-input [(ngModel)]="forgotpassword.Colour" 
                                        type="text" nzSize="small">
                                </div>
                            </div>
                            <div class="steps-action">
                                <button nz-button nzType="primary" (click)="pre2()" *ngIf="current2 > 0">
                                    <span>Prev</span>
                                </button>
                                <button nz-button nzType="primary" (click)="next2()" *ngIf="current2 < 2">
                                    <span>Next</span>
                                </button>
                                <button nz-button nzType="primary" class="!bg-green-600" (click)="done2()" *ngIf="current2 === 2">
                                    <span>Save</span>
                                </button>
                            </div>
                        </section>
                    </nz-collapse-panel>
                </nz-collapse>
            </section>
            <section class="">
                <h1 class="text-center py-3 font-bold">Change Password</h1>
                <nz-steps [nzCurrent]="current">
                    <nz-step nzTitle="1"></nz-step>
                    <nz-step nzTitle="2"></nz-step>
                    <nz-step nzTitle="3"></nz-step>
                </nz-steps>

                <div *ngIf="index===1" class="steps-content">
                    <div class="w-full space-y-2">
                        <span class="text-gray-500">Enter Your Old Password</span>
                        <input nz-input [(ngModel)]="editpassword.oldpassword" placeholder="Enter Your Old Password"
                            type="text" nzSize="small">
                    </div>
                </div>
                <div *ngIf="index===2" class="steps-content">
                    <div class="w-full space-y-2">
                        <span class="text-gray-500">Enter New Password</span>
                        <input nz-input [(ngModel)]="editpassword.newpassword" placeholder="Enter New Password"
                            type="text" nzSize="small">
                    </div>
                </div>
                <div *ngIf="index===3" class="steps-content">
                    <div class="w-full space-y-2">
                        <span class="text-gray-500">Confirm New Password</span>
                        <input nz-input [(ngModel)]="editpassword.confirmpassword" placeholder="Confirm New Password"
                            type="text" nzSize="small">
                    </div>
                </div>
                <div class="steps-action">
                    <button nz-button nzType="primary" (click)="pre()" *ngIf="current > 0">
                        <span>Prev</span>
                    </button>
                    <button nz-button nzType="primary" (click)="next()" *ngIf="current < 2">
                        <span>Next</span>
                    </button>
                    <button nz-button nzType="primary" class="!bg-green-600" (click)="done()" *ngIf="current === 2">
                        <span>Update</span>
                    </button>
                </div>
            </section>
            
        </ng-container>
    </nz-drawer>
</main>